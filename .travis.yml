language: python
python:
- '2.7'
- '3.6'
install:
- pip install --upgrade pip
- pip install -U Sphinx
- pip install sphinx_rtd_theme
script:
- git clone https://github.com/DigiKlausur/digiklausur.github.io
- cd docs
- make html
- cd build
- rsync -a html/ ../../digiklausur.github.io
- cd ../../digiklausur.github.io
- git checkout -b develop
- git fetch --all
- git reset --hard origin/develop
- git add .
- git commit -m "New release pushed"
- git push origin develop
deploy:
  provider: pages
  skip-cleanup: false
  github-token: "$GITHUB_TOKEN"
  on:
    branch: develop
